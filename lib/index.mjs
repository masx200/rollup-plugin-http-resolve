import c from"path";import l from"@hattip/polyfills/node-fetch";function u(n){return n?.startsWith("http://")||n?.startsWith("https://")}const w=new Map,m=function({cache:n=w,onRequest:f,onUseCache:h,fetcher:a,resolveIdFallback:o}={}){return l(),{name:"rollup-plugin-http-resolve",async resolveId(t,r){if(/^https?:\/\//.test(t))return t;if(r&&u(r)){if(t.startsWith("https://"))return t;const{pathname:e,protocol:s,host:i}=new URL(r);if(t.startsWith("/"))return`${s}//${i}${t}`;if(t.startsWith(".")){const p=c.join(c.dirname(e),t);return`${s}//${i}${p}`}}else if(o){const e=o(t,r);if(e)return e}},async load(t){if(t!==null&&u(t)){const r=await n.get(t);if(r)return h?.(t),r;if(f?.(t),a){const e=await a(t);return await n.set(t,e),e}else{const e=await fetch(t);if(!e.ok)throw e.statusText;const s=await e.text();return await n.set(t,s),s}}}}};export{m as httpResolve};
//# sourceMappingURL=index.mjs.map
