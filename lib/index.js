"use strict";var c=require("path"),p=require("@hattip/polyfills/node-fetch");function u(s){return s?.startsWith("http://")||s?.startsWith("https://")}const w=new Map,W=function({cache:s=w,onRequest:h,onUseCache:l,fetcher:a,resolveIdFallback:i}={}){return p(),{name:"rollup-plugin-http-resolve",async resolveId(e,r){if(/^https?:\/\//.test(e))return e;if(r&&u(r)){if(e.startsWith("https://"))return e;const{pathname:t,protocol:n,host:o}=new URL(r);if(e.startsWith("/"))return`${n}//${o}${e}`;if(e.startsWith(".")){const f=c.join(c.dirname(t),e);return`${n}//${o}${f}`}}else if(i){const t=i(e,r);if(t)return t}},async load(e){if(e!==null&&u(e)){const r=await s.get(e);if(r)return l?.(e),r;if(h?.(e),a){const t=await a(e);return await s.set(e,t),t}else{const t=await fetch(e,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36 Edg/108.0.1462.54"}});if(!t.ok)throw t.statusText;const n=await t.text();return await s.set(e,n),n}}}}};exports.httpResolve=W;
//# sourceMappingURL=index.js.map
