"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var d=require("path"),w=require("@hattip/polyfills/node-fetch");function u(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var c=u(d),v=u(w);function f(e){return e?.startsWith("http://")||e?.startsWith("https://")}const _=new Map,$=function({cache:e=_,onRequest:l,onUseCache:h,fetcher:s,resolveIdFallback:i}={}){return v.default(),{name:"rollup-plugin-http-resolve",async resolveId(t,a){if(/^https?:\/\//.test(t))return t;if(a&&f(a)){if(t.startsWith("https://"))return t;const{pathname:r,protocol:n,host:o}=new URL(a);if(t.startsWith("/"))return`${n}//${o}${t}`;if(t.startsWith(".")){const p=c.default.join(c.default.dirname(r),t);return`${n}//${o}${p}`}}else if(i){const r=i(t,a);if(r)return r}},async load(t){if(t!==null&&f(t)){const a=await e.get(t);if(a)return h?.(t),a;if(l?.(t),s){const r=await s(t);return await e.set(t,r),r}else{const r=await fetch(t);if(!r.ok)throw r.statusText;const n=await r.text();return await e.set(t,n),n}}}}};exports.httpResolve=$;
//# sourceMappingURL=index.js.map
